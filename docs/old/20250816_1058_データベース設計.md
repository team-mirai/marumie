# データベース設計

## 概要

政治とカネダッシュボードアプリケーションのデータベース設計書

## テーブル構成

### 政治団体 (political_organizations)

政治団体の基本情報を管理するテーブル

| カラム名 | 型 | 制約 | 説明 |
|---------|---|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 内部ID |
| name | VARCHAR(255) | NOT NULL | 政治団体名 |
| description | TEXT | | 政治団体の説明・詳細 |
| created_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 作成日時 |
| updated_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新日時 |

### 取引 (transactions)

政治団体の収支取引を管理するテーブル（マネーフォワードクラウドからのインポートデータを格納）

| カラム名 | 型 | 制約 | 説明 |
|---------|---|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 内部ID |
| political_organization_id | BIGINT | NOT NULL, FOREIGN KEY | 政治団体ID |
| transaction_no | VARCHAR(255) | UNIQUE | 取引No |
| transaction_date | DATE | NOT NULL | 取引日 |
| financial_year | INT | NOT NULL | 会計年度 |
| transaction_type | ENUM('income', 'expense', 'other') | NOT NULL | 取引種別（収入/支出/その他） |
| debit_account | VARCHAR(255) | NOT NULL | 借方勘定科目 |
| debit_sub_account | VARCHAR(255) | | 借方補助科目 |
| debit_department | VARCHAR(255) | | 借方部門 |
| debit_partner | VARCHAR(255) | | 借方取引先 |
| debit_tax_category | VARCHAR(255) | | 借方税区分 |
| debit_amount | DECIMAL(15,2) | NOT NULL | 借方金額(円) |
| credit_account | VARCHAR(255) | NOT NULL | 貸方勘定科目 |
| credit_sub_account | VARCHAR(255) | | 貸方補助科目 |
| credit_department | VARCHAR(255) | | 貸方部門 |
| credit_partner | VARCHAR(255) | | 貸方取引先 |
| credit_tax_category | VARCHAR(255) | | 貸方税区分 |
| credit_amount | DECIMAL(15,2) | NOT NULL | 貸方金額(円) |
| description | TEXT | | 摘要 |
| description_1 | TEXT | | 摘要1 |
| description_2 | TEXT | | 摘要2 |
| description_3 | TEXT | | 摘要3 |
| description_detail | TEXT | | 摘要_詳細 |
| tags | TEXT | | タグ |
| memo | TEXT | | メモ |
| created_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 作成日時 |
| updated_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新日時 |

## テーブル関係

```
political_organizations (1) ----< (n) transactions
```

## 補足

- transactions.tags については、今後用途が決まったら正規化するかもしれないが今は用途も決まっていないため文字列としている
- transactions.memo はユーザーが自由に記録できるメモ欄として追加
