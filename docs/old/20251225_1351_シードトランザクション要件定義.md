# Seed Transactionテストケース要件

## 目的

政治資金報告書XML出力機能の目視デバッグを可能にするため、報告書様式の要件を満たす包括的なテストデータを定義する。

## 前提条件

- 対象年度: 2025年（令和7年）
- 対象団体: **サンプル党**（テスト専用の政治団体）
- 対応様式: [scope-by-2026Jan.md](scope-by-2026Jan.md) の「対応必須の様式」に記載のもの

## 既存シードデータからの変更点

本ドキュメントに基づくシードデータ実装時には、以下の変更を行う:

1. **既存団体の削除**
   - `チームみらい`（team-mirai-volunteer）: 削除
   - `デジタル民主主義を考える会`（digimin）: 削除

2. **新規団体の追加**
   - `サンプル党`（sample-party）: テスト専用団体として追加
   - slug: `sample-party`
   - 表示名: `サンプル党`
   - 説明: `政治資金報告書XMLエクスポート機能のテストデータ用政治団体`

3. **関連データの統一**
   - 全てのトランザクション、Counterpart、ReportProfileは`サンプル党`に紐付ける
   - 既存のユーザーデータは維持するが、所属団体を`サンプル党`に変更

**理由**:
- 実在の団体名（チームみらい）を連想させるデータを避ける
- テストデータであることを明示し、本番データとの混同を防ぐ
- 報告書様式のテストに特化したクリーンなデータセットを構築する

## トランザクション要件一覧

### 1. SYUUSHI07_03: 事業による収入

**様式要件:**
- 事業種類ごとに収入を記載（機関紙発行、売店販売など）
- 金額制限なし（全て記載）

**必須テストケース:**

| # | 事業種類 | 金額 | テスト目的 |
|---|---------|------|----------|
| 1 | 機関紙発行 | 120,000円 | 典型的な事業収入 |
| 2 | 売店販売 | 20,000円 | 少額の事業収入 |
| 3 | セミナー開催 | 500,000円 | 高額の事業収入 |

**注意点:**
- 複数の事業種類をカバーすること
- 金額の大小でバリエーションを持たせること

---

### 2. SYUUSHI07_04: 借入金

**様式要件:**
- 借入先ごとに金額を記載
- 金額制限なし（全て記載）

**必須テストケース:**

| # | 借入先 | 金額 | テスト目的 |
|---|--------|------|----------|
| 1 | 代表　太郎 | 1,000,000円 | 代表者からの借入 |
| 2 | 政治資金銀行 | 3,000,000円 | 金融機関からの借入 |

**注意点:**
- 個人と法人からの借入を含めること

---

### 3. SYUUSHI07_05: 本部または支部から供与された交付金

**様式要件:**
- 本支部名称、金額、年月日、所在地を記載
- 金額制限なし（全て記載）

**必須テストケース:**

| # | 本支部名称 | 金額 | 年月日 | 所在地 | テスト目的 |
|---|-----------|------|--------|--------|----------|
| 1 | サンプル党本部 | 5,000,000円 | r7/4/1 | 東京都千代田区永田町一丁目1番1号 | 本部からの交付金 |
| 2 | サンプル党東京都連 | 1,500,000円 | r7/7/15 | 東京都新宿区西新宿二丁目8番1号 | 支部からの交付金 |

**注意点:**
- 複数回の交付を想定
- 日付は和暦形式（ge/m/d）

---

### 4. SYUUSHI07_06: その他の収入

**様式要件:**
- **10万円以上**: 個別明細を記載（摘要・金額）
- **10万円未満**: 合算して記載（明細不要）

**必須テストケース:**

| # | 摘要 | 金額 | テスト目的 |
|---|------|------|----------|
| 1 | 預金利息 | 80,000円 | 10万円未満（合算対象） |
| 2 | 雑収入 | 30,000円 | 10万円未満（合算対象） |
| 3 | 助成金 | 150,000円 | 10万円以上（個別明細） |
| 4 | 前期繰越金の調整 | 200,000円 | 10万円以上（個別明細） |

**注意点:**
- **境界値テスト**: 10万円未満と10万円以上の両方を含めること
- 10万円未満の複数取引は `MIMAN_GK` にまとめられる
- 10万円以上の取引は個別の `ROW` 要素として出力される

---

### 5. SYUUSHI07_07: 寄附の明細

**様式要件:**
- 寄附者区分ごとに分類（個人 KUBUN1、法人 KUBUN2、政治団体 KUBUN3）
- **5万円を超える寄附**: 個別明細を記載（氏名・金額・年月日・住所・職業）
- **5万円以下の寄附**: 「その他の寄附」として合算（SONOTA_GK）

**必須テストケース:**

#### KUBUN1: 個人からの寄附

| # | 寄附者氏名 | 金額 | 年月日 | 住所 | 職業 | テスト目的 |
|---|-----------|------|--------|------|------|----------|
| 1 | 寄附　太郎 | 40,000円 | r7/3/15 | 東京都渋谷区神南一丁目1番1号 | 会社員 | 5万円以下（合算対象） |
| 2 | 寄附　花子 | 30,000円 | r7/6/20 | 東京都港区六本木三丁目2番1号 | 公務員 | 5万円以下（合算対象） |
| 3 | 寄附　次郎 | 60,000円 | r7/5/10 | 東京都新宿区西新宿二丁目8番1号 | 経営者 | 5万円超（個別明細） |
| 4 | 寄附　三郎 | 100,000円 | r7/9/30 | 東京都千代田区丸の内一丁目9番2号 | 弁護士 | 5万円超（個別明細） |
| 5 | 寄附　四郎 | 50,000円 | r7/11/5 | 東京都品川区東品川二丁目2番20号 | 医師 | 境界値（ちょうど5万円、合算対象） |

#### KUBUN2: 法人その他の団体からの寄附

| # | 寄附者氏名 | 金額 | 年月日 | 住所 | 職業 | テスト目的 |
|---|-----------|------|--------|------|------|----------|
| 1 | 株式会社デジタル未来 | 45,000円 | r7/4/25 | 東京都港区芝浦一丁目2番3号 | - | 5万円以下（合算対象） |
| 2 | 一般社団法人政治改革推進会 | 80,000円 | r7/7/8 | 東京都中央区日本橋二丁目1番1号 | - | 5万円超（個別明細） |
| 3 | NPO法人民主主義研究所 | 150,000円 | r7/10/15 | 東京都世田谷区三軒茶屋一丁目1番1号 | - | 5万円超（個別明細） |

#### KUBUN3: 政治団体からの寄附

| # | 寄附者氏名 | 金額 | 年月日 | 住所 | 職業 | テスト目的 |
|---|-----------|------|--------|------|------|----------|
| 1 | デジタル政策推進団体 | 200,000円 | r7/6/1 | 東京都千代田区永田町二丁目1番2号 | - | 5万円超（個別明細） |
| 2 | 若手政治家の会 | 300,000円 | r7/8/20 | 東京都港区赤坂一丁目11番28号 | - | 5万円超（個別明細） |

**注意点:**
- **境界値テスト**: 5万円以下（40,000円）、ちょうど5万円、5万円超（60,000円）を含めること
- 5万円以下の寄附は `SONOTA_GK` にまとめられる
- 5万円を超える寄附は個別の `ROW` 要素として出力される
- 各区分（個人・法人・政治団体）ごとに明細を分けること
- 職業は個人・法人で必須、政治団体は空欄（または"-"）

---

### 6. SYUUSHI07_14: 経常経費の支出

**様式要件:**
- 支出項目別に分類（光熱水費 KUBUN1、備品消耗品費 KUBUN2、事務所費 KUBUN3）
- **5万円を超える支出**: 個別明細を記載（目的・金額・年月日・氏名・住所）
- **5万円以下の支出**: 「その他の支出」として合算（SONOTA_GK）

**必須テストケース:**

#### KUBUN1: 光熱水費

| # | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|--------|--------------|------|----------|
| 1 | 事務所電気代 | 45,000円 | r7/2/28 | 東京電力株式会社 | 東京都千代田区内幸町一丁目1番3号 | 5万円以下（合算対象） |
| 2 | 事務所水道代 | 30,000円 | r7/2/28 | 東京都水道局 | 東京都新宿区西新宿二丁目8番1号 | 5万円以下（合算対象） |
| 3 | 事務所ガス代 | 60,000円 | r7/1/31 | 東京ガス株式会社 | 東京都港区海岸一丁目5番20号 | 5万円超（個別明細） |

#### KUBUN2: 備品・消耗品費

| # | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|--------|--------------|------|----------|
| 1 | 文房具購入 | 40,000円 | r7/3/10 | 株式会社オフィスサプライ | 東京都中央区八重洲二丁目1番1号 | 5万円以下（合算対象） |
| 2 | PC購入 | 150,000円 | r7/4/5 | 株式会社パソコンショップ | 東京都千代田区外神田一丁目1番1号 | 5万円超（個別明細） |
| 3 | プリンター購入 | 80,000円 | r7/5/20 | 株式会社事務機器販売 | 東京都品川区東品川二丁目2番20号 | 5万円超（個別明細） |

#### KUBUN3: 事務所費

| # | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|--------|--------------|------|----------|
| 1 | 事務所家賃 | 200,000円 | r7/1/31 | 不動産管理株式会社 | 東京都渋谷区渋谷一丁目1番1号 | 5万円超（個別明細） |
| 2 | 電話代 | 35,000円 | r7/2/28 | NTT東日本 | 東京都新宿区西新宿三丁目19番2号 | 5万円以下（合算対象） |
| 3 | インターネット回線費 | 48,000円 | r7/2/28 | 株式会社ネット通信 | 東京都港区芝浦一丁目2番3号 | 5万円以下（合算対象） |

**注意点:**
- **境界値テスト**: 5万円以下と5万円超の両方を含めること
- 各区分（光熱水費・備品消耗品費・事務所費）ごとに明細を分けること
- 支払先の氏名と住所は必須
- 領収書区分（RYOUSYU）は実装状況に応じて設定

---

### 7. SYUUSHI07_15: 政治活動費の支出

**様式要件:**
- 支出項目別に分類（9種類: 組織活動費、選挙関係費、機関紙誌の発行事業費、宣伝事業費、政治資金パーティー開催事業費、その他の事業費、調査研究費、寄附・交付金、その他の経費）
- **5万円を超える支出**: 個別明細を記載（目的・金額・年月日・氏名・住所）
- **5万円以下の支出**: 「その他の支出」として合算（SONOTA_GK）
- 各区分には「費目」（HIMOKU）が設定される

**必須テストケース:**

#### KUBUN1: 組織活動費

| # | 費目 | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|------|--------|--------------|------|----------|
| 1 | 会議費 | 会議室利用料 | 40,000円 | r7/3/15 | 株式会社貸会議室 | 東京都千代田区内幸町一丁目1番1号 | 5万円以下（合算対象） |
| 2 | 会議費 | 月例会議費用 | 45,000円 | r7/4/20 | 株式会社会議施設 | 東京都中央区日本橋二丁目1番1号 | 5万円以下（合算対象） |
| 3 | 旅費交通費 | 地方視察交通費 | 80,000円 | r7/6/10 | JR東日本 | 東京都渋谷区代々木二丁目2番2号 | 5万円超（個別明細） |
| 4 | 人件費 | 事務職員給与 | 250,000円 | r7/1/31 | 事務　太郎 | 東京都世田谷区三軒茶屋一丁目1番1号 | 5万円超（個別明細） |

#### KUBUN2: 選挙関係費

| # | 費目 | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|------|--------|--------------|------|----------|
| 1 | 選挙準備費 | ポスター印刷 | 120,000円 | r7/5/20 | 株式会社印刷センター | 東京都台東区浅草一丁目1番1号 | 5万円超（個別明細） |
| 2 | 選挙準備費 | ビラ配布費用 | 48,000円 | r7/6/5 | 株式会社配布サービス | 東京都墨田区押上一丁目1番2号 | 5万円以下（合算対象） |

#### KUBUN3: 機関紙誌の発行事業費

| # | 費目 | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|------|--------|--------------|------|----------|
| 1 | 印刷費 | 機関紙印刷 | 100,000円 | r7/4/30 | 株式会社政治印刷 | 東京都文京区本郷三丁目1番1号 | 5万円超（個別明細） |
| 2 | 配送費 | 機関紙郵送費 | 35,000円 | r7/5/10 | 日本郵便株式会社 | 東京都千代田区霞が関一丁目3番2号 | 5万円以下（合算対象） |

#### KUBUN4: 宣伝事業費

| # | 費目 | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|------|--------|--------------|------|----------|
| 1 | 広告宣伝費 | Web広告費用 | 180,000円 | r7/7/15 | 株式会社デジタル広告 | 東京都港区六本木六丁目10番1号 | 5万円超（個別明細） |
| 2 | 広告宣伝費 | チラシ印刷 | 45,000円 | r7/8/20 | 株式会社小規模印刷 | 東京都大田区蒲田五丁目1番1号 | 5万円以下（合算対象） |

#### KUBUN5: 政治資金パーティー開催事業費

（2025年はパーティー未開催のため、原則不要）

| # | 費目 | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|------|--------|--------------|------|----------|
| - | - | - | - | - | - | - | パーティー未開催のため該当なし |

**注意**: 将来的にパーティーを開催する場合に備え、データ構造として対応可能にしておく。

#### KUBUN6: その他の事業費

| # | 費目 | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|------|--------|--------------|------|----------|
| 1 | セミナー開催費 | 会場費 | 70,000円 | r7/9/10 | 株式会社イベント会場 | 東京都新宿区新宿三丁目1番1号 | 5万円超（個別明細） |
| 2 | セミナー開催費 | 講師謝礼 | 50,000円 | r7/9/10 | 講師　太郎 | 東京都杉並区阿佐谷南一丁目1番1号 | ちょうど5万円（合算対象） |

#### KUBUN7: 調査研究費

| # | 費目 | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|------|--------|--------------|------|----------|
| 1 | 調査委託費 | 政策調査委託 | 300,000円 | r7/10/15 | 株式会社政策研究所 | 東京都千代田区永田町一丁目1番1号 | 5万円超（個別明細） |
| 2 | 資料購入費 | 書籍購入 | 30,000円 | r7/11/5 | 株式会社政治書店 | 東京都千代田区神田神保町一丁目1番1号 | 5万円以下（合算対象） |

#### KUBUN8: 寄附・交付金

| # | 費目 | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|------|--------|--------------|------|----------|
| 1 | 政治団体への寄附 | デジタル政策研究会への寄附 | 500,000円 | r7/12/10 | デジタル政策研究会 | 東京都港区赤坂一丁目11番28号 | 5万円超（個別明細） |

#### KUBUN9: その他の経費

| # | 費目 | 目的 | 金額 | 年月日 | 氏名（支払先） | 住所 | テスト目的 |
|---|------|------|------|--------|--------------|------|----------|
| 1 | 雑費 | 会計ソフト利用料 | 40,000円 | r7/12/31 | 株式会社会計クラウド | 東京都渋谷区道玄坂一丁目2番3号 | 5万円以下（合算対象） |
| 2 | 雑費 | 銀行手数料 | 5,000円 | r7/12/31 | みずほ銀行 | 東京都千代田区大手町一丁目5番5号 | 5万円以下（合算対象） |

**注意点:**
- **境界値テスト**: 5万円以下と5万円超の両方を含めること
- 全9種類の区分をカバーすること（KUBUN5は未開催でも構造として対応）
- 各区分には費目（HIMOKU）が必須
- 支払先の氏名と住所は必須
- 領収書区分（RYOUSYU）は実装状況に応じて設定

---

### 8. SYUUSHI07_16: 本部または支部に対する交付金の支出

**様式要件:**
- 支出項目、金額、年月日、本支部名称、所在地を記載
- 金額制限なし（全て記載）

**必須テストケース:**

| # | 支出項目 | 金額 | 年月日 | 本支部名称 | 所在地 | テスト目的 |
|---|---------|------|--------|-----------|--------|----------|
| 1 | 活動費交付 | 1,000,000円 | r7/4/30 | サンプル党渋谷支部 | 東京都渋谷区道玄坂一丁目2番3号 | 支部への交付金 |
| 2 | 選挙応援金 | 500,000円 | r7/6/15 | サンプル党世田谷支部 | 東京都世田谷区三軒茶屋一丁目1番1号 | 支部への交付金 |

**注意点:**
- 複数の支部への交付を想定
- 日付は和暦形式（ge/m/d）
- 所在地は正確に記載

---

## トランザクション作成時の注意事項

### 1. 日付形式
- データベース格納時: ISO 8601形式（YYYY-MM-DD）
- XML出力時: 和暦形式（ge/m/d）に変換
- 例: 2025-04-01 → r7/4/1

### 2. 取引区分（TransactionType）
- 収入系トランザクション: `income`
- 支出系トランザクション: `expense`
- 振替・調整: `non_cash_journal`

### 3. カテゴリ分類（categoryKey）
各様式に対応するcategoryKeyを使用:
- 事業収入: `business_income`
- 借入金: `borrowing`
- 交付金（収入）: `grant_income`
- その他の収入: `other_income`
- 寄附: `donation_income`（KUBUN別の詳細分類も検討）
- 経常経費: `operating_expense`（KUBUN別の詳細分類も検討）
- 政治活動費: `political_activity_expense`（KUBUN別の詳細分類も検討）
- 交付金（支出）: `grant_expense`

### 4. 金額の境界値
以下の境界値は必ずテストすること:
- **5万円**: 寄附・支出の明細記載基準
  - 5万円以下（例: 40,000円）
  - ちょうど5万円（50,000円）
  - 5万円を超える（例: 60,000円）
- **10万円**: その他の収入の明細記載基準
  - 10万円未満（例: 80,000円）
  - 10万円以上（例: 150,000円）

### 5. 取引先情報（Counterpart）
- 寄附・支出の5万円超の取引には取引先情報が必須
- 氏名・住所を正確に記載
- 個人の場合は職業も記載（法人・政治団体は不要）

### 6. 複式簿記から単式簿記への変換
- 収入: 借方が現金・預金系の取引
- 支出: 貸方が現金・預金系の取引
- 金額は借方・貸方の絶対値を使用

---

## データ量の目安

各様式で最低限必要なトランザクション数:

| 様式 | 最低行数 | 推奨行数 | 備考 |
|------|---------|---------|------|
| SYUUSHI07_03 | 2 | 3-5 | 複数の事業種類をカバー |
| SYUUSHI07_04 | 1 | 2 | 個人・法人からの借入 |
| SYUUSHI07_05 | 1 | 2 | 複数回の交付を想定 |
| SYUUSHI07_06 | 2 | 4 | 10万円未満×2 + 10万円以上×2 |
| SYUUSHI07_07 | 各KUBUN 3 | 各KUBUN 5-7 | 5万円以下×2 + 5万円超×3 + 境界値1 |
| SYUUSHI07_14 | 各KUBUN 2 | 各KUBUN 3-4 | 5万円以下×2 + 5万円超×2 |
| SYUUSHI07_15 | KUBUN1-4,6-9 各2 | 各3-4 | 5万円以下×2 + 5万円超×2 |
| SYUUSHI07_16 | 1 | 2 | 複数の支部への交付 |

**合計推奨トランザクション数**: 80-100件程度

---

## 実装チェックリスト

実装時には以下を確認すること:

- [ ] 各様式の必須テストケースが全て含まれている
- [ ] 金額の境界値テスト（5万円、10万円）が含まれている
- [ ] 各区分（KUBUN）が適切に分類されている
- [ ] 日付が和暦形式に変換される
- [ ] 取引先情報（氏名・住所・職業）が正確に設定されている
- [ ] 合算対象（SONOTA_GK、MIMAN_GK）が正しく計算される
- [ ] 個別明細対象が正しくROW要素として出力される
- [ ] XML出力時の項目長制限（最大文字数）を超えていない
- [ ] 複式簿記から単式簿記への変換が正しく行われる

---

---

## Counterpart（取引先）のシードデータ

トランザクションに紐づく取引先情報として、以下の代表的なcounterpartをシードデータとして保持する。

### 必須Counterpart一覧

| # | name（氏名・名称） | address（住所） | 用途 | 備考 |
|---|------------------|----------------|------|------|
| 1 | 東京電力株式会社 | 東京都千代田区内幸町一丁目1番3号 | 光熱水費 | 電気代の支払先 |
| 2 | 株式会社オフィスサプライ | 東京都中央区八重洲二丁目1番1号 | 備品・消耗品費 | 文房具等の購入先 |
| 3 | 不動産管理株式会社 | 東京都渋谷区渋谷一丁目1番1号 | 事務所費 | 家賃の支払先 |
| 4 | 事務　太郎 | 東京都世田谷区三軒茶屋一丁目1番1号 | 組織活動費 | 事務職員への給与 |
| 5 | 株式会社印刷センター | 東京都台東区浅草一丁目1番1号 | 機関紙誌の発行事業費 | 機関紙印刷の委託先 |
| 6 | 株式会社デジタル広告 | 東京都港区六本木六丁目10番1号 | 宣伝事業費 | Web広告の委託先 |
| 7 | 株式会社政策研究所 | 東京都千代田区永田町一丁目1番1号 | 調査研究費 | 政策調査の委託先 |
| 8 | サンプル党本部 | 東京都千代田区永田町一丁目1番1号 | 交付金（収入） | 本部からの交付金 |

### データ作成時の注意点

1. **氏名・住所の形式**
   - 氏名（name）: 最大120文字（XML仕様に準拠）
   - 住所（address）: 最大120文字（XML仕様に準拠）
   - 住所は「都道府県＋市区町村＋町名＋番地」の形式

2. **用途の網羅**
   - 経常経費の各区分（光熱水費・備品消耗品費・事務所費）をカバー
   - 政治活動費の主要区分（組織活動費・機関紙発行・宣伝事業費・調査研究費）をカバー
   - 収入の交付金もカバー

3. **リアリティ**
   - 実在しそうな企業名・個人名を使用
   - 東京都内の住所を想定（チームみらいの活動エリア）

4. **トランザクションとの紐付け**
   - 上記のcounterpartは、前述のトランザクションテストケースで使用される
   - 同一のcounterpartが複数のトランザクションで再利用される想定

---

## 参考資料

- [docs/reference/report-format.md](docs/reference/report-format.md) - 政治資金収支報告書XMLデータフォーマット仕様書
- [scope-by-2026Jan.md](scope-by-2026Jan.md) - 2026年1月末までの開発スコープ
- [20251215_1053_counterpartテーブル設計.md](20251215_1053_counterpartテーブル設計.md) - Counterpartテーブル設計
